<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>    Some XAML Syntax to Remember
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='https://fonts.googleapis.com/css?family=Gentium+Book+Basic|Merriweather:400,300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://hndr.me/theme/css/cid.css">
        <link href="https://hndr.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="HNDR.ME Atom Feed" />
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

            <div class="container">

<header class="blog-header">
    <h1><a href="https://hndr.me">HNDR.ME</a></h1>
    <p> A nerd pretending to be a software engineer. </p>
    <nav>
        <a href="https://hndr.me/blog">INDEX</a>
        <a href="https://hndr.me/archives">ARCHIVES</a>
        <a href="https://hndr.me/categories">CATEGORIES</a>
    </nav>
</header>

    <div class="post">

        <header>
            <h1>Some <span class="caps">XAML</span> Syntax to&nbsp;Remember</h1>
            <p class="date">Written on <time datetime="2012-08-14T14:17:00+08:00">Aug 14, 2012</time></p>
        </header>

        <article>
            <p>After developing for <span class="caps">WPF</span>/ Silverlight for a while, most people will be
familiar with using <span class="caps">XAML</span> to declare <span class="caps">UI</span> elements, but even though I have
been comfortable with <span class="caps">XAML</span> for quite a while, I don’t really know what
is going on behind the stage. Reading Programming Windows by Charles
Petzold shed some lights on it for me, so this post is here again so
that I won’t&nbsp;forget.</p>
<p>One important thing I didn&#8217;t know before is that <span class="caps">XAML</span> file more or less is just
another way to express the C# code, and the <span class="caps">XAML</span> elements in it are
actually .<span class="caps">NET</span> objects, and anything that can be declared in <span class="caps">XAML</span> can be
done in C# as well. Most page consists of two files, a <code>.xaml</code> file and a
<code>.xaml.cs</code> file, as the partial keyword in the C# file suggest, the
<code>.xaml.cs</code> file only consist a part of the class declaration. As we can
guess, the rest are declared in the <span class="caps">XAML</span> file. If we look at the
<code>obj/Debug</code> folder of the Project, we can see there are several files with
the name of <code>PageName.g.cs</code> and <code>PageName.g.i.cs</code>. During compile time, the
<span class="caps">XAML</span> file is parsed to get the elements and other information declared
in it to generate the intermediate C# file, which will then be compiled
together with our <code>.xaml.cs</code> file to generate the class declaration for a
particular page. In the <code>PageName.g.i.cs</code> file, we can actually see the
declaration for the <code>InitializeComponent</code> method that we always call in
the constructor of our <code>.xaml.cs</code> file. The method basically initiates all
objects declared in the <span class="caps">XAML</span> file, which is why if we try to get to
access an element declared in the <span class="caps">XAML</span> before the method is called, we
would get a <code>NullReferenceException</code>.</p>
<p>That’s enough for the backstage stuff, lets move on to the syntax. Most
<span class="caps">XAML</span> pages looks similar to&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;Page</span>
    <span class="na">x:Class=</span><span class="s">&quot;App2.MainPage&quot;</span>
    <span class="na">IsTabStop=</span><span class="s">&quot;false&quot;</span>
    <span class="na">xmlns=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span>
    <span class="na">xmlns:x=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span>
    <span class="na">xmlns:local=</span><span class="s">&quot;using:App2&quot;</span>
    <span class="na">xmlns:d=</span><span class="s">&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span>
    <span class="na">xmlns:mc=</span><span class="s">&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span>
    <span class="na">mc:Ignorable=</span><span class="s">&quot;d&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;Grid</span> <span class="na">Background=</span><span class="s">&quot;{StaticResource ApplicationPageBackgroundThemeBrush}&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>

<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>As mentioned before, a <span class="caps">XAML</span> declaration can be expressed in C#, since
the elements in <span class="caps">XAML</span> file are .<span class="caps">NET</span> objects. The Page declaration above
basically declare an instance of <code>MainPage</code> in the <code>App2</code> namespace which is
a subclass from the <code>Page</code> class. The <code>xmlns</code> statements are standard xml
namespace inclusion which would allows us to use various elements.
Similarly, with these&nbsp;declaration:</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;Page</span>
    <span class="na">x:Class=</span><span class="s">&quot;App2.MainPage&quot;</span>
    <span class="na">IsTabStop=</span><span class="s">&quot;false&quot;</span>
    <span class="na">xmlns=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span>
    <span class="na">xmlns:x=</span><span class="s">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span>
    <span class="na">xmlns:local=</span><span class="s">&quot;using:App2&quot;</span>
    <span class="na">xmlns:d=</span><span class="s">&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span>
    <span class="na">xmlns:mc=</span><span class="s">&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span>
    <span class="na">mc:Ignorable=</span><span class="s">&quot;d&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Grid</span> <span class="na">Background=</span><span class="s">&quot;CadetBlue&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">&quot;Hello&quot;</span>
            <span class="na">FontSize=</span><span class="s">&quot;96&quot;</span>
            <span class="na">Foreground=</span><span class="s">&quot;BlanchedAlmond&quot;</span>
            <span class="na">HorizontalAlignment=</span><span class="s">&quot;Center&quot;</span>
            <span class="na">VerticalAlignment=</span><span class="s">&quot;Center&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>The same result can be produced with these C#&nbsp;code:</p>
<div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">sealed</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">MainPage</span> <span class="p">:</span> <span class="n">Page</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">MainPage</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">InitializeComponent</span><span class="p">();</span>
        <span class="n">Grid</span> <span class="n">contentGrid</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Grid</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Background</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SolidColorBrush</span><span class="p">(</span><span class="n">Windows</span><span class="p">.</span><span class="n"><span class="caps">UI</span></span><span class="p">.</span><span class="n">Colors</span><span class="p">.</span><span class="n">CadetBlue</span><span class="p">)</span>
        <span class="p">};</span>

        <span class="n">TextBlock</span> <span class="n">txtBlk</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TextBlock</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">Text</span> <span class="p">=</span> <span class="s">&quot;Hello&quot;</span><span class="p">,</span>
            <span class="n">FontSize</span> <span class="p">=</span> <span class="m">96</span><span class="p">,</span>
            <span class="n">Foreground</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SolidColorBrush</span><span class="p">(</span><span class="n">Windows</span><span class="p">.</span><span class="n"><span class="caps">UI</span></span><span class="p">.</span><span class="n">Colors</span><span class="p">.</span><span class="n">BlanchedAlmond</span><span class="p">),</span>
            <span class="n">HorizontalAlignment</span> <span class="p">=</span> <span class="n">HorizontalAlignment</span><span class="p">.</span><span class="n">Center</span><span class="p">,</span>
            <span class="n">VerticalAlignment</span> <span class="p">=</span> <span class="n">VerticalAlignment</span><span class="p">.</span><span class="n">Center</span>
        <span class="p">};</span>
        <span class="n">contentGrid</span><span class="p">.</span><span class="n">Children</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">txtBlk</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="n">Content</span> <span class="p">=</span> <span class="n">contentGrid</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>As we can see, the <span class="caps">XAML</span> element properties are just another way to set
the values of the member variables of the objects. As we can see on the
C# code above, the the Foreground property of a TextBlock is of type
<code>SolidColorBrush</code> (or any subclass of the <code>Brush</code> class actually), but in
the <span class="caps">XAML</span> syntax, it seems like we are assigning a string to it. This is
because the compiler will parse and assign the appropriate attribute for&nbsp;us.</p>
<p>The <span class="caps">XAML</span> code above shows two ways of setting a property of an <span class="caps">XAML</span>
element, namely the usual property attributes syntax, and the other one
is one known as the Property Element syntax. The property-element syntax
can be used to define some more complex attributes such as defining a
gradient background that requires defining more than one colours and
points. For example, the <code>TextBlock</code> above can be defined as such with the
property-element&nbsp;syntax:</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;TextBlock&gt;</span>
    <span class="nt">&lt;TextBlock.Foreground&gt;</span>
        <span class="nt">&lt;SolidColorBrush&gt;</span>
            Black
        <span class="nt">&lt;/SolidColorBrush&gt;</span>
    <span class="nt">&lt;/TextBlock.Foreground&gt;</span>
    <span class="nt">&lt;TextBlock.Text&gt;</span>
        Hello
    <span class="nt">&lt;/TextBlock.Text&gt;</span>
    <span class="nt">&lt;TextBlock.FontSize&gt;</span>
        96
    <span class="nt">&lt;/TextBlock.FontSize&gt;</span>
    <span class="nt">&lt;TextBlock.HorizontalAlignment&gt;</span>
        Center
    <span class="nt">&lt;/TextBlock.HorizontalAlignment&gt;</span>
    <span class="nt">&lt;TextBlock.VerticalAlignment&gt;</span>
        Center
    <span class="nt">&lt;/TextBlock.VerticalAlignment&gt;</span>
<span class="nt">&lt;/TextBlock&gt;</span>
</pre></div>


<p>Here we see that we defined the properties of the <code>TextBlock</code> by creating
another elements for each of them, and on for the Foreground property,
we explicitly defined a <code>SolidColorBrush</code> as the value of the property.
This is entirely optional, we can put the value inside the <code>Foreground</code>
tag and it would still work, just like we did with the other properties.
We don’t need to explicitly create a element of type <code>Double</code> for the
<code>FontSize</code>, nor we need to create another elements for the enumeration of
the alignment properties. We are still relying on the compiler to
actually recognize that the <code>Black</code> inside the tag is actually referring
to the colour enumeration, but there are times where would need to
explicitly define the property with the usual property-attributes&nbsp;syntax.</p>
<p>In the previous example, we explicitly define what are the properties
and its value, but as we see on most <span class="caps">XAML</span> we see, there are many cases
where we don’t do that. For example, we didn’t explicitly define the
<code>rootGrid</code> element of our page is the value for the Content property of
the page, nor we need to explicitly define that our <code>TextBlock</code> is a
member of the <code>Children</code> property of the <code>Grid</code>. This is because every
classes referenced in <span class="caps">XAML</span> can have one and only one property that is
defined as its <code>ContentProperty</code>, where for these properties, the property
element tags are not required. So, instead of&nbsp;writing</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;Page&gt;</span>
    <span class="nt">&lt;Page.Content&gt;</span>
        <span class="nt">&lt;Grid&gt;</span>
            <span class="nt">&lt;Grid.Children&gt;</span>
                <span class="nt">&lt;TextBlock/&gt;</span>
                <span class="nt">&lt;TextBlock/&gt;</span>
                <span class="nt">&lt;TextBlock/&gt;</span>
            <span class="nt">&lt;/Grid.Children&gt;</span>
        <span class="nt">&lt;/Grid&gt;</span>
    <span class="nt">&lt;/Page.Content&gt;</span>
<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>We can simply&nbsp;write:</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;Page&gt;</span>
    <span class="nt">&lt;Grid&gt;</span>
        <span class="nt">&lt;TextBlock/&gt;</span>
        <span class="nt">&lt;TextBlock/&gt;</span>
        <span class="nt">&lt;TextBlock/&gt;</span>
    <span class="nt">&lt;/Grid&gt;</span>
<span class="nt">&lt;/Page&gt;</span>
</pre></div>


<p>And it would produce the same result. For the same reason, we can use
the same thing to define the <code>Text</code> property of a <code>TextBlock</code> without
creating property element tag for it,&nbsp;So,</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;TextBlock</span> <span class="na">Text=</span><span class="s">&quot;Hello&quot;</span><span class="nt">/&gt;</span>

<span class="c">&lt;!-- Is the same as: --&gt;</span>

<span class="nt">&lt;TextBlock&gt;</span>
    <span class="nt">&lt;TextBlock.Text&gt;</span>
        Hello
    <span class="nt">&lt;/TextBlock.Text&gt;</span>
<span class="nt">&lt;/TextBlock&gt;</span>

<span class="c">&lt;!-- and --&gt;</span>

<span class="nt">&lt;TextBlock&gt;</span>
    Hello
<span class="nt">&lt;/TextBlock&gt;</span>
</pre></div>


<p>I guess thats enough for now. Learning about all this made me realise
that <span class="caps">XAML</span> is a very flexible and powerful language and can
be used for many things that can be done with C#, so knowing it would hopefully
be very useful in developing for the some of the latest Microsoft platforms (Win 8, <span class="caps">WP</span> 8, etc).
But of course, it is still a markup language, and it has several limitations,
such as lack of logic processing, and inability to create instances of objects that requires
parameters in its&nbsp;contructor.</p>
        </article>

        <footer>
            <p>This entry is posted in <a href="https://hndr.me/category/2012.html">2012</a>.</p>
        </footer>

<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'hndrblog';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    </div>


<footer class="blog-footer">

    <ul class="nav">
                <li><a href="https://hndr.me/blog">Blog</a></li>
            <li><a href="https://github.com/hdra">Github</a></li>
            <li><a href="https://twitter.com/_hdra">Twitter</a></li>
    <script type="text/javascript">
        // JS ROT13 by http://techblog.tilllate.com/2008/07/20/ten-methods-to-obfuscate-e-mail-addresses-compared/
        document.write( "<yv><n uers=\"znvygb:uraqen2392@tznvy.pbz\" ery=\"absbyybj\">Rznvy</n></yv>".replace(/[a-zA-Z]/g, function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));
    </script>
    </ul>

    <p class="disclaimer">
        Contents is <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">cc by-nc-sa</a>. All opinions are of my own.
    </p>
</footer>
            </div>
<script>
    var _gaq=[['_setAccount','UA-40075063-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
    </body>
</html>