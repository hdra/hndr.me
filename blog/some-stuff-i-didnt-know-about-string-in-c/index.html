<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>    Some Stuff I Didn’t Know About String in C#
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='https://fonts.googleapis.com/css?family=Gentium+Book+Basic|Merriweather:400,300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://hndr.me/theme/css/cid.css">
        <link href="https://hndr.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="HNDR.ME Atom Feed" />
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

            <div class="container">

<header class="blog-header">
    <h1><a href="https://hndr.me">HNDR.ME</a></h1>
    <p> A nerd pretending to be a software engineer. </p>
    <nav>
        <a href="https://hndr.me/blog">INDEX</a>
        <a href="https://hndr.me/archives">ARCHIVES</a>
        <a href="https://hndr.me/categories">CATEGORIES</a>
    </nav>
</header>

    <div class="post">

        <header>
            <h1>Some Stuff I Didn’t Know About String in&nbsp;C#</h1>
            <p class="date">Written on <time datetime="2012-05-25T23:08:00+08:00">May 25, 2012</time></p>
        </header>

        <article>
            <p>Well, its a bit strange getting to know something that I’ve used
extensively for quite a while, but there are indeed some things that
feels&nbsp;revealing.</p>
<p>First of all, I knew that strings is a little bit special, in a way that
it is a reference type, but it behaves very much like a value type, for&nbsp;example:</p>
<div class="highlight"><pre><span></span><span class="n">SomeClass</span> <span class="n">a</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SomeClass</span><span class="p">();</span>
<span class="n">a</span><span class="p">.</span><span class="n">age</span> <span class="p">=</span> <span class="m">18</span><span class="p">;</span>
<span class="n">SomeClass</span> <span class="n">b</span> <span class="p">=</span> <span class="n">a</span><span class="p">;</span>
<span class="n">b</span><span class="p">.</span><span class="n">age</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>

<span class="c1">// a.age will be 40, since they are both referring to the same value</span>
<span class="c1">// but,</span>

<span class="kt">string</span> <span class="n">x</span> <span class="p">=</span> <span class="s">&quot;hello&quot;</span><span class="p">;</span>
<span class="kt">string</span> <span class="n">y</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
<span class="n">y</span> <span class="p">=</span> <span class="s">&quot;world;  // x will stay as &quot;</span><span class="n">hello</span><span class="s">&quot;</span>
</pre></div>


<p>So, well, that’s about it. I also knew that string are immutable, as in,
the value can’t be changed after they are set, so something like this
would throw an&nbsp;error:</p>
<div class="highlight"><pre><span></span><span class="kt">string</span> <span class="n">x</span> <span class="p">=</span> <span class="s">&quot;hello&quot;</span><span class="p">;</span>
<span class="n">x</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">=</span> <span class="sc">&#39;j&#39;</span><span class="p">;</span>
</pre></div>


<p>But, since something like that didn’t get used much anyway, I never put
too much thought into it, and I just learned that the two are actually
related. In the first code snippet, since x is immutable, when y try to
change the value, it will create a new string instead, so it will point
to a new location in the memory, leaving x alone, and the two no longer
refer to the same memory&nbsp;location.</p>
<p>The value of the string itself are stored in the same memory location as
well, so even if two strings are created separately, if they have the
same value, they will still point to the same&nbsp;location.</p>
<div class="highlight"><pre><span></span><span class="kt">string</span> <span class="n">x</span> <span class="p">=</span> <span class="s">&quot;hello&quot;</span><span class="p">;</span>
<span class="kt">string</span> <span class="n">y</span> <span class="p">=</span> <span class="s">&quot;hello&quot;</span><span class="p">;</span>
<span class="c1">// x == y is true</span>
</pre></div>


<p>I personally have ran into some bugs related to this behaviour, of course,
I just tried do something else that works without understanding why. Until&nbsp;now.</p>
<p>That mentioned, one thing to remember is that new string values are
created each time the value change, so that means there would be a lot
of temporary objects in the memory, and the garbage collection will run
more often, so if there value of the change is something that is done
very extensively in the program, it would be better to use a class
called StringBuilder. It behaves almost the same way as a string, but it
is not immutable, and it is designed to build string, as the name
suggest. I wanted to talk more about it, but I found a <a href="http://www.dotnetperls.com/stringbuilder">better
explanation</a> about it, so I’ll just use this post as a book mark to that&nbsp;post.</p>
<p>Some other interesting stuffs about strings and the manipulation of
strings as&nbsp;well:</p>
<ul>
<li><a href="http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html">http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html</a></li>
<li><a href="http://www.codinghorror.com/blog/2006/07/i-heart-strings.html">http://www.codinghorror.com/blog/2006/07/i-heart-strings.html</a></li>
<li><a href="http://www.codinghorror.com/blog/2005/03/if-you-like-regular-expressions-so-much-why-dont-you-marry-them.html">http://www.codinghorror.com/blog/2005/03/if-you-like-regular-expressions-so-much-why-dont-you-marry-them.html</a></li>
<li><a href="http://blog.stevex.net/string-formatting-in-csharp/">http://blog.stevex.net/string-formatting-in-csharp/</a></li>
<li><a href="http://blogs.msdn.com/b/kathykam/archive/2006/03/29/564426.aspx">http://blogs.msdn.com/b/kathykam/archive/2006/03/29/564426.aspx</a></li>
</ul>
        </article>

        <footer>
            <p>This entry is posted in <a href="https://hndr.me/category/software.html">Software</a>.</p>
        </footer>

<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'hndrblog';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    </div>


<footer class="blog-footer">

    <ul class="nav">
                <li><a href="https://hndr.me/blog">Blog</a></li>
            <li><a href="https://github.com/hdra">Github</a></li>
            <li><a href="https://twitter.com/_hdra">Twitter</a></li>
    <script type="text/javascript">
        // JS ROT13 by http://techblog.tilllate.com/2008/07/20/ten-methods-to-obfuscate-e-mail-addresses-compared/
        document.write( "<yv><n uers=\"znvygb:uraqen2392@tznvy.pbz\" ery=\"absbyybj\">Rznvy</n></yv>".replace(/[a-zA-Z]/g, function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));
    </script>
    </ul>

    <p class="disclaimer">
        Contents is <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">cc by-nc-sa</a>. All opinions are of my own.
    </p>
</footer>
            </div>
<script>
    var _gaq=[['_setAccount','UA-40075063-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
    </body>
</html>