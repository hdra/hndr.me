<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>    Events in C#
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='https://fonts.googleapis.com/css?family=Gentium+Book+Basic|Merriweather:400,300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://hndr.me/theme/css/cid.css">
        <link href="https://hndr.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="HNDR.ME Atom Feed" />
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

            <div class="container">

<header class="blog-header">
    <h1><a href="https://hndr.me">HNDR.ME</a></h1>
    <p> A nerd pretending to be a software engineer. </p>
    <nav>
        <a href="https://hndr.me/blog">INDEX</a>
        <a href="https://hndr.me/archives">ARCHIVES</a>
        <a href="https://hndr.me/categories">CATEGORIES</a>
    </nav>
</header>

    <div class="post">

        <header>
            <h1>Events in&nbsp;C#</h1>
            <p class="date">Written on <time datetime="2012-05-30T00:27:00+08:00">May 30, 2012</time></p>
        </header>

        <article>
            <p>Alright, last time I posted about <code>Delegate</code>, and together with event,
they are one of the most important concept to understand in event driven
application framework, such as <span class="caps">WPF</span>, Silverlight, and Silverlight for
<span class="caps">WP7</span>, and maybe even WinRT as well (I haven’t tried it), so I believe it
is important to understand how it work, especially when these two are
pretty closely&nbsp;related.</p>
<p>I find the explanation on <a href="http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx"><span class="caps">MSDN</span></a> is pretty easy to understand, Event is
a way for a class to provide notifications to clients when something
interesting happens. Event is declared with a delegate, in fact, there
aren’t much difference between a regular delegate and an event. Here is
an example of an event&nbsp;declaration.</p>
<div class="highlight"><pre><span></span><span class="c1">// declare the delegate</span>
<span class="k">public</span> <span class="k">delegate</span> <span class="k">void</span> <span class="nf">SomethingHappenedEventHandler</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span><span class="n">EventArgs</span> <span class="n">e</span><span class="p">);</span>

<span class="c1">// On the class that has the event</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">SomeClass</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">event</span> <span class="n">SomethingHappenedEventHandler</span> <span class="n">SomethingHappened</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>It indeed looks like a regular delegate declaration, and indeed, it is
indeed very similar to a regular delegate, and the &#8216;event&#8217; keyword is
something that we can think of like a modifier, which makes the delegate
to behaves a little bit different. The first difference is, a delegate
with an event modifier can be included in an interface, where a regular
delegate can&#8217;t. The second one is, a delegate with an event modifier can
only be called from within the class, but it can be changed/assigned to
other method that handle the event, where a regular delegate can be
called by whoever that can access&nbsp;it.</p>
<p>Finally, like what I mentioned on my previous post, event delegate must
conform to a special restriction, where it must return void, and accepts
two arguments, an object that invoke the event, and the information
regarding the event that is derived from the EventArgs class, but this
is a restriction placed by the .<span class="caps">NET</span> framework instead of the C# language
itself, so, .<span class="caps">NET</span> framework has provided a delegate that can be used for
this, the EventHandler. So, if your event doesn&#8217;t provide any additional
data that what is provided by the EventHandler, it is better to just use
the provided delegate. If you do need to pass additional data, you can
just inherit the EventArgs class and provide additional infomation in
the class. There are some others differences between the two, but I
think those are too advanced and not too relevant in practical&nbsp;usage.</p>
<p>Since event is basically a delegate, a firing event is actually just an
invocation of the method that the delegate points to, which we usually
refer to as handling the event. So, in <span class="caps">GUI</span> programming, we often see&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="n">Button</span> <span class="n">x</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Button</span><span class="p">();</span>
<span class="n">x</span><span class="p">.</span><span class="n">Click</span> <span class="p">+=</span> <span class="k">new</span> <span class="n">RoutedEventHandler</span><span class="p">(</span><span class="n">x_Click</span><span class="p">);</span>
</pre></div>


<p>That means, somewhere in the Button class declaration, they have an
event of RoutedEventHandler delegate, and will be called when the the
necessary condition is fulfilled. Something like&nbsp;this:</p>
<div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">delegate</span> <span class="k">void</span> <span class="nf">RoutedEventHandler</span><span class="p">(</span><span class="kt">object</span> <span class="n">sender</span><span class="p">,</span><span class="n">m</span> <span class="n">RoutedEventArgs</span> <span class="n">e</span><span class="p">);</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Button</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">event</span> <span class="n">RoutedEventHandler</span> <span class="n">Click</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">void</span> <span class="nf">checkCondition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">mouseOnButton</span> <span class="p">&amp;&amp;</span> <span class="n">mouseUp</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">Click</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
                <span class="n">Click</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Of course, it is not actually implemented like that, but I hope it can
give you the idea. Maybe the button class will call the <code>checkCondition</code>
periodically, and check if it fulfill the condition to detect a mouse
click, if it does, it will call the <code>Click</code> delegate, which will invoke
the method that it points to, where in our example, will call the
<code>x_Click()</code> method which we assigned previously using the <code>+=</code> operator. In
this case, we call the <code>Button</code> class the event provider, and the class
that implemented the event handler, the event&nbsp;listener/subscriber.</p>
<p>We can also see that the mouse click event uses a subclass of the
<code>EventArgs</code> class, which may provide additional information of the
event, such as the time it was triggered, etc. For example, the
<code>RoutedEventArgs</code> class have a property called <code>Handled</code> that indicate
whether the event is to be marked&nbsp;handled.</p>
<h2>References:</h2>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx">http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx</a></li>
<li><a href="http://www.codeproject.com/Articles/11541/The-Simplest-C-Events-Example-Imaginable">http://www.codeproject.com/Articles/11541/The-Simplest-C-Events-Example-Imaginable</a></li>
</ul>
        </article>

        <footer>
            <p>This entry is posted in <a href="https://hndr.me/category/software.html">Software</a>.</p>
        </footer>

<div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'hndrblog';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    </div>


<footer class="blog-footer">

    <ul class="nav">
                <li><a href="https://hndr.me/blog">Blog</a></li>
            <li><a href="https://github.com/hdra">Github</a></li>
            <li><a href="https://twitter.com/_hdra">Twitter</a></li>
    <script type="text/javascript">
        // JS ROT13 by http://techblog.tilllate.com/2008/07/20/ten-methods-to-obfuscate-e-mail-addresses-compared/
        document.write( "<yv><n uers=\"znvygb:uraqen2392@tznvy.pbz\" ery=\"absbyybj\">Rznvy</n></yv>".replace(/[a-zA-Z]/g, function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));
    </script>
    </ul>

    <p class="disclaimer">
        Contents is <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">cc by-nc-sa</a>. All opinions are of my own.
    </p>
</footer>
            </div>
<script>
    var _gaq=[['_setAccount','UA-40075063-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
    </body>
</html>